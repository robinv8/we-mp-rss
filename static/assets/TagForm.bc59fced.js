import{_ as k,d as A,u as M,j as U,r,o as R,i as L,e as u,k as v,w as t,M as d,a as l,b as N,f as B}from"./index.761767f3.js";import{g as S,u as $,c as h}from"./tagManagement.d68c7b38.js";const j={class:"tag-form"},q=A({__name:"TagForm",setup(z){const i=M(),m=U(),s=r(!1),_=r(!1),p=r(!1),a=r({name:"",cover:null,intro:null,status:1}),g={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"}]},F=async c=>{try{_.value=!0;const e=await S(c);a.value=e.data}catch{d.error("\u83B7\u53D6\u6807\u7B7E\u8BE6\u60C5\u5931\u8D25")}finally{_.value=!1}},E=async()=>{try{p.value=!0,s.value?(await $(i.params.id,a.value),d.success("\u66F4\u65B0\u6210\u529F")):(await h(a.value),d.success("\u521B\u5EFA\u6210\u529F")),m.push("/tags")}catch{d.error(s.value?"\u66F4\u65B0\u5931\u8D25":"\u521B\u5EFA\u5931\u8D25")}finally{p.value=!1}};return R(()=>{i.params.id&&(s.value=!0,F(i.params.id))}),(c,e)=>{const y=l("a-page-header"),b=l("a-input"),n=l("a-form-item"),D=l("a-upload"),V=l("a-textarea"),w=l("a-switch"),f=l("a-button"),x=l("a-space"),C=l("a-form"),T=l("a-card");return N(),L("div",j,[u(y,{title:s.value?"\u7F16\u8F91\u6807\u7B7E":"\u6DFB\u52A0\u6807\u7B7E",subtitle:"\u6807\u7B7E\u4FE1\u606F",onBack:e[0]||(e[0]=o=>v(m).go(-1))},null,8,["title"]),u(T,{loading:_.value},{default:t(()=>[u(C,{model:a.value,rules:g,layout:"vertical",onSubmit:E},{default:t(()=>[u(n,{label:"\u6807\u7B7E\u540D\u79F0",field:"name"},{default:t(()=>[u(b,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.name=o),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5C01\u9762\u56FE",field:"cover"},{default:t(()=>[u(D,{"file-list":a.value.cover,"onUpdate:fileList":e[2]||(e[2]=o=>a.value.cover=o),action:"/api/upload",limit:1,"list-type":"picture-card"},null,8,["file-list"])]),_:1}),u(n,{label:"\u7B80\u4ECB",field:"intro"},{default:t(()=>[u(V,{modelValue:a.value.intro,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.intro=o),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u7B80\u4ECB","auto-size":{minRows:3}},null,8,["modelValue"])]),_:1}),u(n,{label:"\u72B6\u6001",field:"status"},{default:t(()=>[u(w,{modelValue:a.value.status,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.status=o),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1}),u(n,null,{default:t(()=>[u(x,null,{default:t(()=>[u(f,{type:"primary","html-type":"submit",loading:p.value},{default:t(()=>e[6]||(e[6]=[B(" \u63D0\u4EA4 ")])),_:1,__:[6]},8,["loading"]),u(f,{onClick:e[5]||(e[5]=o=>v(m).go(-1))},{default:t(()=>e[7]||(e[7]=[B("\u53D6\u6D88")])),_:1,__:[7]})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["loading"])])}}});var H=k(q,[["__scopeId","data-v-73b591e8"]]);export{H as default};
